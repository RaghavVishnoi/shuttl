 
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAWdJ3F1a1pmCUjyHaINmV1_nOJ6hpbArM&libraries=places&callback=initMap"
        async defer></script>
 <script>
  window.onload = function() {
   initMap();
  };
     

 function initMap() {
   debugger
  var directionsService = new google.maps.DirectionsService;
  var directionsDisplay = new google.maps.DirectionsRenderer;
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 6,
    center: {lat: 28.5846875, lng: -77.3159296}
  });
  directionsDisplay.setMap(map);
calculateAndDisplayRoute(directionsService, directionsDisplay);


 
function calculateAndDisplayRoute(directionsService, directionsDisplay) {
  var waypts = [];
   
  
  <%RouteSuggestionsSlot.slot_points(params[:route_id]).each do |route|%>
     waypts.push({
        location: new google.maps.LatLng(<%=route.lat%>,<%=route.long%>),
        stopover: true

      });
  <%end%>
   
 
     


  directionsService.route({

    origin: 'Sector-2 Noida',
    destination: 'Sector-65 Noida',
    waypoints: waypts,
    optimizeWaypoints: true,
    travelMode: google.maps.TravelMode.DRIVING
  }, function(response, status) {
    if (status === google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
      var route = response.routes[0];
      var summaryPanel = document.getElementById('directions-panel');
     // summaryPanel.innerHTML = '';
      // For each route, display summary information.
      for (var i = 0; i < route.legs.length; i++) {
        var routeSegment = i + 1;
        //summaryPanel.innerHTML += '<b>Route Segment: ' + routeSegment +
            '</b><br>';
        //summaryPanel.innerHTML += route.legs[i].start_address + ' to ';
        //summaryPanel.innerHTML += route.legs[i].end_address + '<br>';
        //summaryPanel.innerHTML += route.legs[i].distance.text + '<br><br>';
      }
    } else {
      window.alert('Directions request failed due to ' + status);
    }
  });
}
  var directionsService = new google.maps.DirectionsService;
  var directionsDisplay = new google.maps.DirectionsRenderer;
  var map = new google.maps.Map(document.getElementById('googleMap'), {
    zoom: 7,
    center: {lat: 41.85, lng: -87.65}
  });
  directionsDisplay.setMap(map);

  var onChangeHandler = function() {
    calculateAndDisplayRoute(directionsService, directionsDisplay);
  };
   
}

function calculateAndDisplayRoute(directionsService, directionsDisplay) {
  directionsService.route({
    origin: "#{params[:s]}",
    destination: "#{params[:d]}",
    travelMode: google.maps.TravelMode.DRIVING
  }, function(response, status) {
    if (status === google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
    } else {
      window.alert('Directions request failed due to ' + status);
    }
  });
}
    $(document).ready(function() {

      $("#start-time").owlCarousel({
        items : 10,
		 navigation: true,
        navigationText: [
        "<i class='fa fa-angle-left'></i>",
        "<i class='fa fa-angle-right'></i>"
        ],
        
      });
	  
	  $("#start-time2").owlCarousel({
        items : 10,
		 navigation: true,
        navigationText: [
        "<i class='fa fa-angle-left'></i>",
        "<i class='fa fa-angle-right'></i>"
        ],
        
      });
	  
	  
	  $("#end-time").owlCarousel({
        items : 10,
		 navigation: true,
        navigationText: [
        "<i class='fa fa-angle-left'></i>",
        "<i class='fa fa-angle-right'></i>"
        ],
        
      });
	  
	  $("#end-time2").owlCarousel({
        items : 10,
		 navigation: true,
        navigationText: [
        "<i class='fa fa-angle-left'></i>",
        "<i class='fa fa-angle-right'></i>"
        ],
        
      });

      $('.link').on('click', function(event){
        var $this = $(this);
        if($this.hasClass('clicked')){
          $this.removeClass('clicked');
        } else{
          $this.addClass('clicked');
        }
      });

$('.check-box li').click(function(){
  $(this).addClass("selected");
  
  
});
	
$('#sub').click(function(){
	var geocoder = new google.maps.Geocoder();
	
	
var address = $('#pac-input').val();

geocoder.geocode( { 'address': address}, function(results, status) {

  if (status == google.maps.GeocoderStatus.OK) {
    var latitude = results[0].geometry.location.lat();
    var longitude = results[0].geometry.location.lng();
    alert(latitude);
  } 
});
})


	
   });
	
	
	
    </script>
	
	
 
<div id="page-preloader"><span class="spinner"></span></div>
<!-- Loader end -->
<div class="layout-theme animated-css"  data-header="sticky" data-header-top="200"> 
  <div id="wrapper"> 
 
    <!-- HEADER -->
    <header class="header">
      <div class="container">
        <div class="row">
          <div class="col-xs-12"> <a class="header-logo" href="index.html"><img class="header-logo__img" src="/assets/logo.png" alt="Logo"></a>
            <div class="header-inner">Home: Office Pickup: Drop for Odd:Even 2.0.</div> 
          </div>
          <!-- end col  --> 
        </div>
        <!-- end row  --> 
      </div>
      <!-- end container--> 
    </header>
    <!-- end header -->
     <section class="section-default">
        <div class="container"> 
          
           <div class="row">
            
          <div class="col-md-12 wow zoomIn" data-wow-duration="1s">
		  <div class="Booking-status">
		  <h5><%=RouteSuggestion.find(params[:route_id]).name%></h5>
		  <div class="location-map-block mo-none">
		  <div id="map"></div>
		  </div>

		  <ul class="book-detail">
		  <li class="col-md-6">
		  <div class="change-col">

		  <h5>Going to work</h5>
		  
		  <span class="change-link"><a href="/routes?route_id=<%=params[:route_id]%>">Change</a></span>
		  </div>
<%if session[:home_slot] != nil%> 
		  <p>Depart: <%=session[:s]%> @ <%=RouteSuggestion.home_depart(params[:route_id],session[:from][0],session[:from][1])%>
		  <br>
		  Arrives: <%=session[:d]%> @  <%=session[:home_slot]%>
		  <br>
		  <em><%=RouteSuggestion.find(params[:route_id]).threshold - RouteSuggestionsPledge.total_pledge(params[:route_id])%> more ppl required to louch root</em>
		  </p>
		  </li>
<%else%>
  <em>No timeslot was selected</em>
  <br><br>		  
<%end%>		  
		  <li class="col-md-6">
		  <div class="change-col">
		  <h5>Return from work</h5>

		  <span class="change-link"><a href="/routes/return?route_id=<%=params[:route_id]%>">Change</a></span>
		  </div>
<%if session[:work_slot] != nil%>  
		  <p>Depart: <%=session[:d]%> @ <%=session[:work_slot]%>
		  <br>
		  Arrives: <%=session[:s]%> @ <%=RouteSuggestion.home_depart(params[:route_id],session[:from][0],session[:from][1])%> 
		  <br>
		  <em><%=RouteSuggestion.find(params[:route_id]).threshold - RouteSuggestionsPledge.total_pledge(params[:route_id])%>  more ppl required to louch root</em>
		  </p>
<%else%>
  <p>No timeslot was selected</p>	
  <br><br>	  
<%end%>		  
		  </li>
		  
		  </ul>
		  
		 </div> 
		<!-- end Booking status -->
		<!-- star time -->
		<div class="travel-time-block">
		
		 <div class="button-col">
		  <h5>To Travel on this route select a pass</h5>
		  <a class="btn btn-info">10 Rides @ Rs.499</a>
		  <a class="btn btn-info">Promo Monthly @ Rs.1800</a></i></button>
		  </div>
		 <p class="font-s">(we'll change your wallet just before lounching the services)</p>
		  <div class="button-block">
		 
		  <button class="btn bg-danger" type="button" id="not-interested">Not Interested <i class="fa fa-ban"></i></button>
		  </div>
		  <div class="social-media">
		  <p>Spread the owrd to lounch the route sooner</p>
		  <a href="#"><i class="fa fa-envelope-o"></i></a>
		  <a href="#"><i class="fa fa-facebook"></i></a>
		  <a href="#"><i class="fa fa-twitter"></i></a>
		  <a href="#"><i class="fa fa-linkedin"></i></a>
		  <a href="#"><i class="fa fa-comment-o"></i></a>
		  </div>
		  
		 </div>
		 <!-- end time -->
		 
         </div>
		<!-- end coll --> 
		 
         </div>
         
        </div>
        <!-- end container --> 
      </section>
      <!-- end section-default -->
   
    
    
  </div>

 <!-- end wrapper --> 
</div>
<!-- SCRIPTS --> 