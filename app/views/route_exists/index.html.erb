<script>
       
  window.onload = function() {
  initMap();
};
infowindowList[window].open(map,markerList[window]);
    $(document).ready(function() {
      

	
   });
	
function initMap() {
 
  var directionsService = new google.maps.DirectionsService;
  var directionsDisplay = new google.maps.DirectionsRenderer;
   map = new google.maps.Map(document.getElementById('map'), {
    
    center: {lat: <%= params[:slat] %>, lng: <%= params[:slng] %>}
  });
  directionsDisplay.setMap(map);
calculateAndDisplayRoute(directionsService, directionsDisplay);
 var marker1 = new MarkerWithLabel({
       position: new google.maps.LatLng(<%=params[:slat]%>, <%=params[:slng]%>),
       draggable: true,
       raiseOnDrag: true,
       map: map,
       labelContent: "Pickup Point",
       labelAnchor: new google.maps.Point(22, 0),
       labelClass: "labels", // the CSS class for the label
       labelStyle: {opacity: 0.75},
       
     });	      
     var iw1 = new google.maps.InfoWindow({
       content: "2016-04-04 09:11:22"
     });
	    
       google.maps.event.addListener(marker1, "click", function (e) { iw1.open(map, this); });
      
var marker2 = new MarkerWithLabel({
       position: new google.maps.LatLng(<%=params[:dlat]%>, <%=params[:dlng]%>),
       draggable: true,
       raiseOnDrag: true,
       map: map,
       labelContent: "Drop Point",
       labelAnchor: new google.maps.Point(22, 0),
       labelClass: "labels", // the CSS class for the label
       labelStyle: {opacity: 0.75},
       
     });        
     var iw2 = new google.maps.InfoWindow({
       content: "2016-04-04 09:11:22"
     });
      
       google.maps.event.addListener(marker2, "click", function (e) { iw2.open(map, this); });
      
  


  // directionsService.route({
  //   origin: 'Sector-2 Noida',
  //   destination: 'Sector-65 Noida',
  //   waypoints: waypts,
  //   optimizeWaypoints: true,
  //   travelMode: google.maps.TravelMode.DRIVING
  // }, function(response, status) {
  //   if (status === google.maps.DirectionsStatus.OK) {
  //     directionsDisplay.setDirections(response);
  //     var route = response.routes[0];
  //     var summaryPanel = document.getElementById('directions-panel');
  //     for (var i = 0; i < route.legs.length; i++) {
  //       var routeSegment = i + 1;
  //     }
  //   } else {
  //     window.alert('Directions request failed due to ' + status);
  //   }
  // });
//}
  // var directionsService = new google.maps.DirectionsService;
  // var directionsDisplay = new google.maps.DirectionsRenderer;
  // var map = new google.maps.Map(document.getElementById('googleMap'), {
  //   zoom: 7,
  //   center: {lat: 28.5846875, lng: 77.3159296}
  // });
  // directionsDisplay.setMap(map);

  // directionsService.route({
  //   origin: 'Sector-2 Noida',
  //   destination: 'Sector-65 Noida',
  //   travelMode: google.maps.TravelMode.DRIVING
  // }, function(response, status) {
  //   if (status === google.maps.DirectionsStatus.OK) {
  //     directionsDisplay.setDirections(response);
  //   } else {
  //     window.alert('Directions request failed due to ' + status);
  //   }
  // });
}
function calculateAndDisplayRoute(directionsService, directionsDisplay) {
  var waypts = [];
  <%

  total_wayPoints=0
  @slots.each do |slot| %>
  <%
  if total_wayPoints<5
  total_wayPoints=total_wayPoints+1
  %>
  waypts.push({
        location: new google.maps.LatLng(<%=slot["lat"] %>,<%= slot["lng"] %>),
        stopover: true
      });
  <%end %>
     <% end %>
  directionsService.route({

    origin: new google.maps.LatLng(<%= @slots.first["lat"] %>,<%= @slots.first["lng"] %>),
    destination: new google.maps.LatLng(<%= @slots.last["lat"] %>,<%= @slots.last["lng"] %>),
    waypoints: waypts,
    optimizeWaypoints: true,
    travelMode: google.maps.TravelMode.DRIVING
  }, function(response, status) {
    if (status === google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
      var route = response.routes[0];
      var summaryPanel = document.getElementById('directions-panel');
      for (var i = 0; i < route.legs.length; i++) {
        var routeSegment = i + 1;
            '</b><br>';
      }
    } else {
      window.alert('Directions request failed due to ' + status);
    }
  });
}
    </script>
	
</head>

<body>
<!-- Loader -->
<!-- <div id="page-preloader"><span class="spinner"></span></div> -->
<!-- Loader end -->
<div class="layout-theme animated-css"  data-header="sticky" data-header-top="200"> 
  <div id="wrapper"> 

  
    
    <!-- HEADER -->
    <header class="header">
      <div class="container">
        <div class="row">
          <div class="col-xs-12"> <a class="header-logo" href="index.html"><img class="header-logo__img" src="images/logo.png" alt="Logo"></a>
            <div class="header-inner">Home: Office Pickup: Drop for Odd:Even 2.0.</div> 
          </div>
          <!-- end col  --> 
        </div>
        <!-- end row  --> 
      </div>
      <!-- end container--> 
    </header>
    <!-- end header -->
     <section class="section-default">
        <div class="container"> 
          
           <div class="row">
            
          <div class="col-md-12 wow zoomIn" data-wow-duration="1s">
		  <div class="location-map-block">
		  <h5><%= @route.name %></h5>
		  <div id="map"> </div>
		 </div> 
		 <div class="book-status-block">
		 <div class="book-staff-right"><span class="frequency"><% if @frequency.size>1 %>
           <%= @frequency.min %>-<%= @frequency.max %> min</span>
           <%else %>
           <%= @frequency.first %> min</span>
           <% end %>
           <br>Frequency</div>
		 <div class="book-staff-left">
		 
		 <div class="time-slot"><span>Timing</span><div class="hour-sl-co">(Hrs)</div>    </div> <div class="hour-sl">

       <%= @timeA.first.advance(hours:5).advance(minutes:30).strftime("%I:%M%p") %>-<%= @timeD.last.advance(hours:5).advance(minutes:30).strftime("%I:%M%p") %>
     </div>

		 
		 </div>
		 <div class="clearfix"></div>
		 </div>
		 
		 
		<!-- end location-map -->
		<!-- star time -->
		<div class="">
		<div class="button-block">
		 <h5>To Travel on this route</h5>
		  <button class="btn btn-info" type="button"><a herf="https://play.google.com/store/apps/details?id=app.goplus.in.myapplication">Download the App</a> </button>
      <button class="btn bg-danger" type="button">Not Interested <i class="fa fa-ban"></i> </button>
		 
		  </div>
		  
		  <div class="social-media">
		  <p>Spread the word and earn free rides*</p>
		  <a href="#"><i class="fa fa-facebook"></i></a>
		  <a href="#"><i class="fa fa-whatsapp"></i></a>
		  </div>
		  
		 </div>
		 <!-- end time -->
		 
         </div>
		<!-- end coll --> 
		 
         </div>
         
        </div>
        <!-- end container --> 
      </section>
      <!-- end section-default -->
   
    
    
  </div>

 <!-- end wrapper --> 
</div>
<!-- SCRIPTS --> 

	
 